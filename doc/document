# 程序架构

![](struct.png)

Front 是前端部分
Service 是框架结构部分
Disk 负责与磁盘中数据交互
Hash 是负责构建索引的Hash算法

## 一、开发环境
    PHP：5.6

    apache：2.4

    JDK：1.8

## 二、使用方法
1，用户在首页输入需要查询的命令，点击“查看结果”查看命令执行结果；点击“清空输入”可清空输入栏。

2，用户可执行命令：select语句、insert语句、delete语句、update语句、count语句、help语句。

3，select语句格式：select name=张晓明,phone=13333333333  或者  select 姓名=张*,电话=13333333333



4，insert语句格式：insert name=张晓明,phone=13333333333

5，delete语句格式：delete name=张晓明,phone=13333333333

6，update语句格式：update name=张晓明,phone=13333333333 set name=张晓明,phone=14444444444

7，count语句格式：count name=张晓明

8，help：查看帮助


## 三、设计思路

### 前端设计：负责人：谢俊

1，前端使用php开发。index.php为主页。control.php作为控制器，分析主页输入的命令。若命令非法，则弹窗提示“命令错误”并返回主页。若为其他正确命令，则进行数据库操作并跳转到结果界面，并统计数据库操作事件，显示在结果界面。若查询失败，则弹窗提示。

2，后台使用java开发。php与java使用php-java-bridge通信。php实例化java编写的sql_analysis类，并将主页输入的命令作为参数传递给execute()函数，进行数据库操作。php接收sql_analysis的getResult()返回结果作为select语句的查询结果，用于展示于selectResult.php界面。

3，php-java-bridge使用方法：下载php-java-bridge 5.5.2，获得JavaBridge.jar和Java.inc。将JavaBridge.jar放到php的ext目录下，双击运行，并且根据选择的端口号相应修改java.inc中的#define ("JAVA_HOSTS", "127.0.0.1:8787")为define ("JAVA_HOSTS", "127.0.0.1:选择的端口号")，注意去掉前面的#号。编写java类sql_analysis，打包成jar包，将生成的jar包拷贝到apache的web应用根目录之下，同时将java.inc也拷到该目录下。在需要php与java通信的文件头引入Java.inc和相应jar包，即可创建java类定义的对象并使用方法。
（2）
（3）
